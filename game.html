<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>å››å­—æˆèªæš¨è©å½™æŸ¥è©¢ç³»çµ± - æˆèªæ“‚å°æŒ‘æˆ°è³½ï½œæ¼«æ­¥æ™‚å…‰</title>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+TC:wght@600;700;900&family=Noto+Sans+TC:wght@400;700&display=swap" rel="stylesheet">
    
    <!-- nav (å‡è¨­è·¯å¾‘æ­£ç¢º) -->
    <link rel="stylesheet" href="nav.css">
    <script src="nav.js"></script>

    <!-- style -->
    <link rel="stylesheet" href="game.css">

</head>
<body>

    <!-- é–‹å§‹ä»‹é¢ -->
    <div id="scene-start" class="scene active">
        <div class="game-card">
            <h1 style="color: var(--accent-red); font-family: var(--serif); font-size: 2.3rem; margin-bottom: 12px; font-weight: 700;">æˆèªæ“‚å°æŒ‘æˆ°è³½</h1>
            
            <div class="art-intro">
                <span>æ–‡æµ·æµ®æ²ˆï¼Œå¢¨éŸ»ç•™é¦™ã€‚</span>
                <span>ä¸€å­—ä¸€å¥ï¼Œçš†æ˜¯åƒè¼‰æ™ºæ…§ä¹‹çµæ™¶ã€‚</span>
                <span>é‚€å›åŸ·ç­†ï¼Œå…±èµ´é€™å ´æ–‡å­—æ“‚å°è³½ã€‚</span>
            </div>

            <div style="margin: 20px 0;">
                <input type="text" id="player-name" placeholder="è«‹è¼¸å…¥æ‚¨çš„åè™Ÿ" maxlength="8" style="padding:12px; text-align:center; font-size:1.1rem; border:1px solid var(--border-color); border-radius:4px; width: 220px; outline: none; font-family: var(--serif);">
            </div>
            
            <button class="btn btn-primary" onclick="startGame()">é³´é‘¼é–‹æˆ°</button>

            <div class="rules-small">
                é–‹æ”¾å¼å¡«ç©ºï¼šéš¨è‘—é¡Œæ•¸å¢åŠ ï¼ŒæŒ‘æˆ°é›£åº¦å°‡é€æ¼¸æ”€å‡ã€‚<br>
                è€ƒé©—æ‰‹è…¦ä¸¦ç”¨ï¼šè¨ˆæ™‚å™¨æŒçºŒé‹è¡Œï¼Œå¯é»æ“Šå»¶æ™‚é“å…·è£œå……æ™‚é–“ã€‚<br>
                <span style="color: var(--accent-red);">â€» ç«¶è³½æœŸé–“è«‹å°ˆæ³¨ç•«é¢ï¼Œä»»ä½•è¦–çª—å¤§å°è®Šæ›´æˆ–é›¢é–‹ç„¦é»å°‡è¦–ç‚ºä½œå¼Šã€‚</span>
            </div>
        </div>
    </div>

    <!-- éŠæˆ²ä¸»ä»‹é¢ -->
    <div id="scene-game" class="scene">
        <div class="game-card">
            <div class="stats-dashboard">
                <div class="stat-item">
                    <span class="stat-label">æŒ‘æˆ°è€…</span>
                    <span class="stat-value" id="display-name">-</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">å‹å ´</span>
                    <span class="stat-value">ğŸ† <span id="score">0</span></span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">å…ƒæ°£</span>
                    <span class="stat-value" id="hp-display">â¤ï¸ x3</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">é“å…·</span>
                    <span class="stat-value" id="clock-display">â³ x3</span>
                </div>
            </div>

            <div id="timer-container"><div id="timer-bar"></div></div>
            
            <p id="potential-count" style="font-size: 0.8rem; color: #bbb; margin-bottom: 12px; font-family: var(--sans);"></p>
            
            <div class="idiom-grid" id="game-grid"></div>
            
            <div id="msg" style="min-height: 24px; margin-bottom: 15px;"></div>

            <div id="action-area" class="btn-group">
                <button class="btn btn-primary" id="submit-btn" onclick="checkAnswer()">æäº¤ç­”æ¡ˆ</button>
                <button class="btn btn-tool" id="clock-btn" onclick="useClockItem()">â³ å»¶æ™‚</button>
                <button class="btn btn-outline" onclick="giveUp()">æ”¾æ£„</button>
            </div>
        </div>
    </div>

    <!-- è§£ç­”å½ˆçª— Modal -->
    <div id="modal-explanation" class="modal-overlay">
        <div class="modal-content">
            <button class="modal-close" onclick="closeAndNext()">âœ•</button>
            <div class="modal-header">
                <h3 id="modal-title" style="margin:0; font-family: var(--serif); font-weight: 700;">è§£ç­”èˆ‡è§£æ</h3>
            </div>
            <div class="modal-body" id="exp-body">
                <!-- å…§å®¹å‹•æ…‹ç”Ÿæˆ -->
            </div>
            <div class="modal-footer">
                <button class="btn btn-primary" style="width: 100%;" onclick="closeAndNext()">ç¹¼çºŒæŒ‘æˆ°</button>
            </div>
        </div>
    </div>

    <!-- ä¸­å ´ä¼‘æ¯ -->
    <div id="scene-rest" class="scene">
        <div class="game-card">
            <h2 style="color: var(--accent-blue); font-family: var(--serif); font-weight: 700; font-size: 2.2rem;">â˜• å°æ†©ç‰‡åˆ»</h2>
            <div class="art-intro" style="margin-top: 15px;">
                <span style="display: block; font-size: 1.1rem; color: #999;">èº«ç¶“ç™¾æˆ°ï¼Œæ–‡é‡‡æ–ç„¶ã€‚</span>
                <span style="display: block; font-size: 1.3rem; margin-top: 5px; color: var(--text-main);">
                    æ‚¨å·²é€£çºŒé—–é <span id="rest-milestone" style="color: var(--accent-red); font-weight: 900;">10</span> é—œ
                </span>
            </div>
            
            <div class="reward-container">
                <div class="reward-item">
                    <span class="reward-icon">â¤ï¸</span>
                    <span class="reward-text">+1</span>
                </div>
                <div class="reward-item">
                    <span class="reward-icon">â³</span>
                    <span class="reward-text">+1</span>
                </div>
            </div>

            <button class="btn btn-primary" style="padding: 12px 50px; font-size: 1.1rem; margin-top: 10px;" onclick="resumeGame()">ç¹¼çºŒæŒ‘æˆ°</button>
        </div>
    </div>

    <!-- çµæŸä»‹é¢ -->
    <div id="scene-end" class="scene">
        <div class="game-card">
            <h1 style="font-family: var(--serif); color: var(--accent-red); font-weight: 700; margin-bottom: 5px;">æŒ‘æˆ°çµæŸ</h1>
            <canvas id="result-canvas" width="600" height="450"></canvas>
            <div class="btn-group" style="margin-top: 15px;">
                <button class="btn btn-outline" onclick="downloadResult()">ä¸‹è¼‰æˆå°±åœ–</button>
                <button class="btn btn-primary" onclick="location.reload()">å†è©¦ä¸€æ¬¡</button>
            </div>
        </div>
    </div>

<script>
    let allIdioms = [];
    let currentQuestion = { baseWord: "", holeIndices: [], validAnswers: [], sortedList: [] };
    let userAnswersHistory = {}; 
    let score = 0, hp = 3, clocks = 3, playerName = "";
    let timerInterval, endTime;
    let isTransitioning = false, isGameActive = false, clockUsedThisRound = false;
    let startWidth = window.innerWidth, startHeight = window.innerHeight;

    async function loadData() {
        try {
            const response = await fetch('https://idiom.strolltimes.com/dict_revised_2015_20240927.json');
            const data = await response.json();
            allIdioms = data.filter(item => item['å­—è©å'] && item['å­—è©å'].length === 4);
            allIdioms.sort(() => Math.random() - 0.5);
            document.getElementById('potential-count').innerText = "è³‡æ–™è¼‰å…¥å®Œæˆï¼Œéš¨æ™‚å¯ä»¥é–‹æˆ°ã€‚";
        } catch (e) {
            document.getElementById('potential-count').innerText = "è³‡æ–™è¼‰å…¥å¤±æ•—ã€‚";
        }
    }
    loadData();

    const triggerAntiCheat = (msg = "ğŸš« å¿ƒæ€ä¸å°ˆï¼æ­¤é¡Œä½œå»¢ã€‚") => {
        if (isGameActive && !isTransitioning) {
            clearInterval(timerInterval);
            handleWrong(msg);
        }
    };

    document.addEventListener("visibilitychange", () => { if (document.hidden) triggerAntiCheat("ğŸš« é›¢é–‹ç•«é¢ï¼æ­¤é¡Œä½œå»¢ã€‚"); });
    window.addEventListener("blur", () => { triggerAntiCheat("ğŸš« å¤±å»ç„¦é»ï¼æ­¤é¡Œä½œå»¢ã€‚"); });
    window.addEventListener("resize", () => {
        if (Math.abs(window.innerWidth - startWidth) > 80 || Math.abs(window.innerHeight - startHeight) > 80) {
            triggerAntiCheat("ğŸš« è¦–çª—è®Šå‹•ï¼æ­¤é¡Œä½œå»¢ã€‚");
        }
    });

    function startGame() {
        if (allIdioms.length === 0) return alert("è³‡æ–™è¼‰å…¥ä¸­...");
        playerName = document.getElementById('player-name').value.trim() || "ç„¡åè‹±é›„";
        document.getElementById('display-name').innerText = playerName;
        startWidth = window.innerWidth;
        startHeight = window.innerHeight;
        userAnswersHistory = {}; 
        score = 0; hp = 3; clocks = 3;
        updateStatsDisplay();
        switchScene('scene-game');
        newQuestion();
    }

    function switchScene(id) {
        document.querySelectorAll('.scene').forEach(s => s.classList.remove('active'));
        document.getElementById(id).classList.add('active');
    }

    function updateStatsDisplay() {
        document.getElementById('score').innerText = score;
        document.getElementById('hp-display').innerText = "â¤ï¸ x" + hp;
        document.getElementById('clock-display').innerText = "â³ x" + clocks;
    }

    function getCurrentPatternCode() {
        let code = "";
        for(let i=0; i<4; i++) {
            code += currentQuestion.holeIndices.includes(i) ? "_" : currentQuestion.baseWord[i];
        }
        return code;
    }

    function newQuestion() {
        if (hp <= 0) return endGame();
        isTransitioning = false; isGameActive = true; clockUsedThisRound = false;
        document.getElementById('msg').innerHTML = "";
        document.getElementById('action-area').style.display = "flex";
        document.getElementById('submit-btn').disabled = false;
        document.getElementById('clock-btn').disabled = clocks <= 0;
        closeModal();

        // æ ¸å¿ƒè¨­å®šï¼šæ ¹æ“šå‹å ´æ•¸(score)åš´æ ¼åŠƒåˆ†éšæ®µ
        let minAnswers = 50;
        let forceHoleCount = 3; // é è¨­æŒ–3æ ¼ (æç¤º1å­—)
        let randomHolesRange = null; // ç”¨æ–¼å¾ŒæœŸéš¨æ©ŸæŒ–ç©º
        let isExtreme = false;

        if (score >= 40) { 
            // 41é¡Œä»¥å¾Œï¼šæç¤º1~3å­— (å¡«1~3æ ¼)ï¼Œç­”æ¡ˆ1+
            minAnswers = 1;
            randomHolesRange = [1, 2, 3]; // æŒ–1~3æ ¼
            isExtreme = true;
        } else if (score >= 30) { 
            // 31~40é¡Œï¼šæç¤º1~2å­— (å¡«2~3æ ¼)ï¼Œç­”æ¡ˆ10+
            minAnswers = 10; 
            randomHolesRange = [2, 3]; // æŒ–2~3æ ¼
        } else if (score >= 20) { 
            // 21~30é¡Œï¼šå›ºå®šæç¤º1å­— (å¡«3æ ¼)ï¼Œç­”æ¡ˆ20+
            minAnswers = 20; 
            forceHoleCount = 3;
        } else if (score >= 10) { 
            // 11~20é¡Œï¼šå›ºå®šæç¤º1å­— (å¡«3æ ¼)ï¼Œç­”æ¡ˆ30+
            minAnswers = 30; 
            forceHoleCount = 3;
        } else { 
            // 1~10é¡Œï¼šå›ºå®šæç¤º1å­— (å¡«3æ ¼)ï¼Œç­”æ¡ˆ50+
            minAnswers = 50; 
            forceHoleCount = 3;
        }

        let bestCandidate = null;
        let attemptLimit = 3000;

        while (attemptLimit--) {
            const target = allIdioms[Math.floor(Math.random() * allIdioms.length)];
            const word = target['å­—è©å'];
            
            // æ±ºå®šæœ¬é¡Œã€Œå¿…é ˆã€æœ‰å¹¾å€‹ç©ºæ ¼ (numHoles)
            let numHoles;
            if (randomHolesRange) {
                numHoles = randomHolesRange[Math.floor(Math.random() * randomHolesRange.length)];
            } else {
                numHoles = forceHoleCount;
            }
            
            // éš¨æ©Ÿæ±ºå®šç©ºæ ¼ä½ç½®
            let hIndices = [];
            let indices = [0, 1, 2, 3].sort(() => Math.random() - 0.5);
            hIndices = indices.slice(0, numHoles).sort();

            // è¨ˆç®—ç¬¦åˆè©²çµ„åˆçš„ç­”æ¡ˆæ•¸
            const matches = allIdioms.filter(item => {
                for(let j=0; j<4; j++) {
                    if(!hIndices.includes(j) && item['å­—è©å'][j] !== word[j]) return false;
                }
                return true;
            });

            // åš´æ ¼æª¢æŸ¥ï¼šå¿…é ˆç¬¦åˆè©²éšæ®µçš„ç©ºæ ¼æ•¸é‡ä¸”ç­”æ¡ˆæ•¸é”æ¨™
            if (matches.length >= minAnswers) {
                bestCandidate = { baseWord: word, holeIndices: hIndices, validAnswers: matches };
                break; 
            }

            // å‚™é¸æ–¹æ¡ˆï¼šå¦‚æœæœå°‹å¿«çµæŸé‚„æ²’æ‰¾åˆ°ï¼Œæš«å­˜ä¸€å€‹ç­”æ¡ˆæ•¸æœ€å¤šã€ä¸”ç©ºæ ¼æ•¸ã€Œçµ•å°æ­£ç¢ºã€çš„é¡Œç›®
            if (!bestCandidate || (matches.length > bestCandidate.validAnswers.length)) {
                // åªæœ‰ç•¶ç©ºæ ¼æ•¸å®Œå…¨ç¬¦åˆé æœŸæ™‚ï¼Œæ‰æ›´æ–°å‚™é¸
                if (hIndices.length === numHoles) {
                    bestCandidate = { baseWord: word, holeIndices: hIndices, validAnswers: matches };
                }
            }
        }

        // æœ€å¾Œä¿éšªï¼šç¢ºä¿æœ€çµ‚é¡Œç›®ä¸ç‚ºç©ºä¸”ç©ºæ ¼æ•¸æ­£ç¢º
        currentQuestion = bestCandidate;
        const potentialCount = currentQuestion.validAnswers.length;
        const actualReveal = 4 - currentQuestion.holeIndices.length;

        document.getElementById('potential-count').innerText = 
            isExtreme ? `æ¥µé™æŒ‘æˆ°ï¼šæ­¤çµ„åˆå…±æœ‰ ${potentialCount} å€‹å¯èƒ½è§£ (æç¤º ${actualReveal} å­—)` : 
            `æ­¤çµ„åˆå…±æœ‰ ${potentialCount} ç¨®å¯èƒ½ (æç¤º ${actualReveal} å­—)`;
        
        renderGrid();
        startTimer(15000 + (currentQuestion.holeIndices.length * 5000));
    }

    function renderGrid() {
        const grid = document.getElementById('game-grid');
        grid.innerHTML = "";
        for (let i = 0; i < 4; i++) {
            const box = document.createElement('div');
            box.className = "char-box";
            if (currentQuestion.holeIndices.includes(i)) {
                box.innerHTML = `<input type="text" id="ans-${i}" class="game-input" data-idx="${i}" autocomplete="off">`;
            } else { box.innerText = currentQuestion.baseWord[i]; }
            grid.appendChild(box);
        }
        const inputs = document.querySelectorAll('.game-input');
        if(inputs[0]) inputs[0].focus();
        inputs.forEach((input, idx) => {
            let isComposing = false;
            input.addEventListener('compositionstart', () => { isComposing = true; });
            input.addEventListener('compositionend', () => {
                isComposing = false;
                if (input.value && inputs[idx+1]) { inputs[idx+1].focus(); }
            });
            input.addEventListener('input', () => {
                if (!isComposing && input.value && inputs[idx+1]) { inputs[idx+1].focus(); }
            });
            input.onkeydown = (e) => {
                if(e.key === 'Backspace' && !input.value && inputs[idx-1]) inputs[idx-1].focus();
                if(e.key === 'Enter') checkAnswer();
            };
        });
    }

    function startTimer(duration) {
        clearInterval(timerInterval);
        const start = Date.now();
        endTime = start + duration;
        timerInterval = setInterval(() => {
            const now = Date.now();
            const remain = Math.max(0, endTime - now);
            const progress = (remain / duration) * 100;
            document.getElementById('timer-bar').style.width = progress + "%";
            if (remain <= 0) { clearInterval(timerInterval); handleWrong("âŒ› æ™‚é–“åˆ°ï¼"); }
        }, 50);
    }

    function useClockItem() {
        if (clocks <= 0 || clockUsedThisRound || !isGameActive) return;
        clocks--; clockUsedThisRound = true;
        updateStatsDisplay();
        endTime += 15000;
        document.getElementById('msg').innerHTML = "<span style='color:var(--accent-gold)'>â³ æ™‚å…‰å»¶é•· 15 ç§’</span>";
        document.getElementById('clock-btn').disabled = true;
    }

    function checkAnswer() {
        if (isTransitioning) return;
        const inputs = document.querySelectorAll('.game-input');
        let attempt = "", complete = true;
        for(let i=0; i<4; i++) {
            if(currentQuestion.holeIndices.includes(i)) {
                const val = document.getElementById(`ans-${i}`).value.trim();
                if(!val) complete = false;
                attempt += val;
            } else { attempt += currentQuestion.baseWord[i]; }
        }
        if(!complete) return;
        const found = allIdioms.find(item => item['å­—è©å'] === attempt);
        if (found) {
            const word = found['å­—è©å'];
            const pattern = getCurrentPatternCode();
            if (userAnswersHistory[pattern] && userAnswersHistory[pattern].has(word)) {
                document.getElementById('msg').innerHTML = `<span style="color:orange">âš ï¸ åœ¨æ­¤å¡«ç©ºçµ„åˆä¸‹ï¼Œã€Œ${word}ã€å·²ç”¨éï¼</span>`;
                return;
            }
            clearInterval(timerInterval);
            isTransitioning = true; isGameActive = false;
            score++; 
            if (!userAnswersHistory[pattern]) userAnswersHistory[pattern] = new Set();
            userAnswersHistory[pattern].add(word);
            updateStatsDisplay();
            document.getElementById('msg').innerHTML = `<span style="color:green">âœ¨ æ­£ç¢ºï¼š${attempt}</span>`;
            showExplanations(found, true);
        } else { 
            clearInterval(timerInterval);
            isTransitioning = true; isGameActive = false;
            handleWrong("âŒ æŸ¥ç„¡æ­¤è©", attempt); 
        }
    }

    function handleWrong(reason, attempt) {
        clearInterval(timerInterval);
        isTransitioning = true; isGameActive = false;
        hp--; updateStatsDisplay();
        document.getElementById('msg').innerHTML = `<span style="color:var(--accent-red)">${reason}</span>`;
        showExplanations(null, false);
    }

    function showExplanations(userFound, isSuccess) {
        const modal = document.getElementById('modal-explanation');
        const body = document.getElementById('exp-body');
        const title = document.getElementById('modal-title');
        let list = [...currentQuestion.validAnswers];
        if (userFound) { list = [userFound, ...list.filter(a => a['å­—è©å'] !== userFound['å­—è©å'])]; }
        title.innerText = isSuccess ? "âœ… æ­£ç¢ºè§£é–" : "ğŸ’¡ å¯æƒœäº†ï¼Œæ­£ç¢ºç­”æ¡ˆåƒè€ƒï¼š";
        let html = "";
        list.forEach(item => {
            const cleanDef = item['é‡‹ç¾©'].replace(/<[^>]*>/g, '').slice(0, 150);
            html += `<div class="idiom-list-item">
                        <span class="idiom-title">ã€${item['å­—è©å']}ã€‘</span>
                        <div class="idiom-def">${cleanDef}...</div>
                     </div>`;
        });
        body.innerHTML = html;
        modal.style.display = "flex";
    }

    function closeModal() { document.getElementById('modal-explanation').style.display = "none"; }
    function closeAndNext() { closeModal(); handleNextStep(); }
    function handleNextStep() {
        if (hp <= 0) { endGame(); return; }
        if (score > 0 && score % 10 === 0) { showRestScene(); } else { newQuestion(); }
    }
    function showRestScene() { document.getElementById('rest-milestone').innerText = score; switchScene('scene-rest'); }
    
    function resumeGame() { 
        hp = Math.min(5, hp + 1); 
        clocks++; 
        updateStatsDisplay(); 
        switchScene('scene-game'); 
        newQuestion(); 
    }

    function giveUp() { if (!isGameActive) return; handleWrong("å·²æ”¾æ£„"); }
    function getRankInfo(s) {
        if (s >= 50) return { title: "ã€ç­†è½é©šé¢¨é›¨ã€‘", desc: "ç™»å³°é€ æ¥µï¼Œæ› å¤çµ•å€«" };
        if (s >= 40) return { title: "ã€æ‰é«˜å…«æ–—ã€‘", desc: "é©šæ‰çµ•è±”ï¼Œç¿°æ—åå®¿" };
        if (s >= 30) return { title: "ã€èƒ¸è—éŒ¦ç¹¡ã€‘", desc: "åšå¤é€šä»Šï¼Œå­¸å¯Œäº”è»Š" };
        if (s >= 20) return { title: "ã€æ–ç„¶æˆç« ã€‘", desc: "è¾­è—»æ¸…éº—ï¼Œæ‰æ°£åˆå±•" };
        if (s >= 10) return { title: "ã€ç•¥é€šæ–‡å¢¨ã€‘", desc: "ç­†è€•ä¸è¼Ÿï¼Œæ¼¸å…¥ä½³å¢ƒ" };
        return { title: "ã€å°‹ç« æ‘˜å¥ã€‘", desc: "å­—æµ·æµ®æ²ˆï¼ŒçŒ¶éœ€ç ¥ç¤ªã€‚" };
    }
    function endGame() { isGameActive = false; clearInterval(timerInterval); closeModal(); switchScene('scene-end'); drawResult(); }
    function drawResult() {
        const canvas = document.getElementById('result-canvas');
        const ctx = canvas.getContext('2d');
        const rank = getRankInfo(score);
        ctx.fillStyle = "#fff"; ctx.fillRect(0, 0, 600, 450);
        ctx.strokeStyle = "#eee"; ctx.lineWidth = 15; ctx.strokeRect(0, 0, 600, 450);
        ctx.fillStyle = "#2c3e50"; ctx.textAlign = "center";
        ctx.font = "600 30px 'Noto Serif TC'"; ctx.fillText("æˆèªæ“‚å°æˆå°±æ¦œ", 300, 80);
        ctx.font = "700 120px 'Noto Serif TC'"; ctx.fillStyle = "#a63d33"; ctx.fillText(`${score}`, 300, 220);
        ctx.font = "600 34px 'Noto Serif TC'"; ctx.fillStyle = "#2c3e50"; ctx.fillText(rank.title, 300, 315);
        ctx.font = "22px 'Noto Serif TC'"; ctx.fillStyle = "#7f8c8d"; ctx.fillText(rank.desc, 300, 360);
        ctx.font = "600 20px 'Noto Serif TC'"; ctx.fillStyle = "#34495e"; ctx.fillText(`æŒ‘æˆ°è€…ï¼š${playerName}`, 300, 410);
    }
    function downloadResult() {
        const link = document.createElement('a');
        link.download = `rank_${playerName}.png`;
        link.href = document.getElementById('result-canvas').toDataURL();
        link.click();
    }
</script>
</body>
</html>